{% extends 'mainapp/base.html' %}

{% block content %}
<div class="row mb-4">
    <div class="col-12">
        <h2 class="fw-bold text-primary">Coordinator Dashboard</h2>
        <p class="text-muted">Welcome back, {{ user.first_name }}</p>
    </div>
</div>

<div class="row mb-5">
    <div class="col-md-4">
        <div class="card text-white bg-info mb-3">
            <div class="card-body">
                <h5 class="card-title">Active Trips</h5>
                <h2 class="display-4">{{ active_trips }}</h2>
                <small>Buses currently on the road</small>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-danger mb-3">
            <div class="card-body">
                <h5 class="card-title">New Incidents</h5>
                <h2 class="display-4">{{ pending_incidents }}</h2>
                <small>Requires attention</small>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-body">
                <h5 class="card-title">Total Routes</h5>
                <h2 class="display-4">{{ total_routes }}</h2>
                <small>Registered in system</small>
            </div>
        </div>
    </div>
</div>

<h4 class="mb-3">Quick Actions</h4>
<div class="row">
    <div class="col-md-6 mb-4">
        <div class="list-group shadow-sm">
            <a href="#" class="list-group-item list-group-item-action active" aria-current="true">
                Fleet Management & Comms
            </a>
            <a href="{% url 'manage_routes' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                Manage Routes & Stops <span>&rarr;</span>
            </a>
            <a href="{% url 'manage_schedules' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                Manage Schedules <span>&rarr;</span>
            </a>
            <a href="{% url 'send_notification' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center text-primary fw-bold">
                ðŸ“¢ Send Notification <span>&rarr;</span>
            </a>
            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center disabled">
                Assign Drivers (Coming Soon) <span>&rarr;</span>
            </a>
            <a href="{% url 'view_all_trips' %}" class="list-group-item list-group-item-action list-group-item-primary">
                ðŸ“‹ <strong>Manage Daily Trips</strong>
                <div class="small text-muted">View manifests, edit capacity, add passengers</div>
            {% if user.role == 'admin' %}
            <a href="{% url 'manage_users_list' %}"
                class="list-group-item list-group-item-action list-group-item-danger border-danger">
                ðŸ‘¥ <strong>Manage Users & Roles</strong>
                <div class="small text-muted">Create admins, promote coordinators, delete accounts</div>
            </a>
            {% endif %}
            </a>
        </div>
    </div>
    
    <div class="col-md-6 mb-4">
        <div class="list-group shadow-sm">
            <a href="#" class="list-group-item list-group-item-action list-group-item-dark" aria-current="true">
                Monitoring
            </a>
            <a href="{% url 'global_map' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                View Live Map <span>&rarr;</span>
            </a>
            <a href="{% url 'performance_dashboard' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        ðŸ“Š View Performance Data <span>&rarr;</span>
            </a>
            <a href="{% url 'view_incidents' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                View Incident Reports 
                {% if pending_incidents > 0 %}
                    <span class="badge bg-danger rounded-pill">{{ pending_incidents }} New</span>
                {% else %}
                    <span>&rarr;</span>
                {% endif %}
            </a>
        </div>
    </div>
</div>
{% endblock %}